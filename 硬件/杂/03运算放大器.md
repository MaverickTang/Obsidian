运算放大器（简称运放），它的英文全称是Operation Amplifier,简写为OP AMP
# 简介
## 应用
初衷是用于执行数学计算，比如加、减、乘、除、函数运算等。在当前的技术条件下，运算放大器的数学运算功能已不再突出，现在主要应用于**信号放大**（测量需求与驱动需求）及**有源滤波器设计**

在多数的常规设计中，我们使用运放的理想模型，忽略其内部结构。把它当作一个“具有放大作用的元件”，接上电源，便可以让它发挥放大的作用。所谓理想的运放，它的输入阻抗无穷大，输出阻抗为零，如图2.1。

![](https://pic3.zhimg.com/80/v2-41aa04ec76e3054ab50418931d969516_1440w.webp)

图2.1 运算放大器模型

理想的运放电路分析有两大重要原则贯穿始终，即“**虚短**”与“**虚断**”。“虚短”的意思是**正端和负端接近短路**，即V+=V-,看起来像“短路”;“虚断”的意思是**流入正端及负端的电流接近于零**，即I+=I-=0,看起来像断路（因为输入阻抗无穷大）。

## 基本特性

* 开环增益A很大，对于理想运放，有4-》无穷
* 传输特性 u0=A*（u+ - u-）
* 输入阻抗大，输出阻抗小
* 两种供电模式：单电源供电与双电源供电
* 电压决定输出范围
集成运放的**电压传输特性**如下图所示；

![](https://pic1.zhimg.com/80/v2-f14254284001904208ed4c63c740a5d8_1440w.webp)

-   工作在**线性区**的时候，则曲线的斜率为电压的放大倍数；
-   工作在非线性区的时候，即处于饱和状态的情况下，输出电压为或
# 虚短和虚断

## 虚短

由于运放的**电压放大倍数很大**，一般通用型运算放大器的开环电压放大倍数都在80 dB以上。而运放的**输出电压是有限**的，一般在 10 V～14 V。因此运放的**差模输入电压不足1 mV，两输入端近似等电位**，相当于 “短路”。开环电压放大**倍数越大**，两输入端的**电位越接近相等**。 “虚短”是指在分析运算放大器处于线性状态时，可**把两输入端视为等电位**，这一特性称为虚假短路，简称虚短。

~~虚短**前面提到，集成运算放大器的开环放大倍数很大，一般通用型的运算放大器的开环电压放大倍数都在**80 dB**以上，但是运放的输出电压是有限制的，一般在**10V～14V**，然而运放的差模输入电压不足**1 mV**，因此可以输入两端可以近似等电位，就相当于 **短路**。开环电压**放大倍数越大**，两输入端的**电位（电压（对地））越接近相等**，这种特性称之为**虚短**~~

## 虚断

于运放的差模输入**电阻也很大**，一般通用型运算放大器的输入电阻都在1MΩ以上。因此流入运放输入端的电流往往不足1uA，远小于输入端外电路的电流。故 通常可把运放的**两输入端视为开路**，且输入**电阻越大，两输入端越接近开路**。“虚断”是指在分析运放处于线性状态时，可以把**两输入端视为等效开路**，这一特性 称为虚假开路，简称虚断

~~**虚断**集成运算放大器具有输入高阻抗的特性，一般同向输入端和反向输入端的输入电阻都在**1MΩ**以上，所以输入端流入运放的电流往往小于**1uA**，远小于输入端外电路的电流。所以这里通常可把运放的两输入端视为开路，并且运放的输入电阻越大，同向和反向输入两端越接近开路。在运放处于线性状态时，根据这个特性可以把两输入端视为等效开路，简称**虚断**（注意：开路就是断路）~~

## 闭环开环
闭环：输出引电路回输入
开环：不引电路回去
# 运放的典型应用
## 放大电路
### 反相比例放大电路

![](https://pic2.zhimg.com/80/v2-f63edf4cbe2d26d9f76540c01861ce9d_1440w.webp)

图2.2 比例放大电路
图2.2是典型的比例放大电路，根据“虚短”及“虚断”法则可以很简单的计算得到结果：
![](https://pic1.zhimg.com/80/v2-7e3beb741c5d71697bfa56f796d597a8_1440w.webp)

等式2.1中负号，代表输出和输入相位相差180°。
推导过程：
（1）、电流的流入等于流出，所以i1=i2+13。由“虚断”法则得知i3=0A，所以i1=i2。
因此，根据第一章介绍的“叠加法则”，得到：
![](https://pic3.zhimg.com/80/v2-1e8d097ba06909490ca6ea07bb63a2aa_1440w.webp)

（2）、又根据“虚短”法则，得知运放的正负两个端等同于“短路”，所以V+=V-。而因为运放的正端子V+被R3下拉至地平面，所以V-=V+=0V，代入等式2.2可得到：
![](https://pic2.zhimg.com/80/v2-9f84a57253ba5966bf1c8e751f42ba39_1440w.webp)
再由等式2.3，进一步得到公式2.1，
![](https://pic1.zhimg.com/80/v2-9fef1e991e3c6da7a8317d05c35256d0_1440w.webp)
因为Vout与Vin成线性的比例关系，因此这个典型放大电路被称为比例放大电路。
关于R1,R2及R3的选值：
1）、R1,R2及R3应该在K级，不宜达到M级；
2）、R3应该等于或近似于R1与R2的并联，以消除偏置电流的影响。
### 差分放大电路  

  

![](https://pic1.zhimg.com/80/v2-600c89ea21b42afef003b5ba0b4d4fe4_1440w.webp)

图2.3 差分放大电路

图2.3为差分放大电路，它是图2.2反相比例放大电路的“变种”。类似与反相比例放大电路的分析方法，可以得到结论：

![](https://pic3.zhimg.com/80/v2-3412ad0c6d08a5228ef37b17081bfcbe_1440w.webp)

当R1=R3并且R2=R4时，得到等式2.5。这就是此电路命名的由来，它可以对差分信号进行放大。

![](https://pic1.zhimg.com/80/v2-40251e62297b2c8070aeb1111de7bc58_1440w.webp)

-   **同相放大电路**  
    

  

上文介绍的放大电路会引起相位翻转180°，图2.4为同相放大电路，顾名思义，输出和输入保持相同的相位。理想的运放具有输入阻抗无穷大，输出阻抗无穷小的特点，同相放大电路保持了运放的这种特性。

![](https://pic1.zhimg.com/80/v2-49cbe3379703399fdc35fa48fba4d024_1440w.webp)

图2.4 同相放大电路

分析图2.4，应用运放的“虚短”，可知V2=V1；此外，因为运放的“虚断”，输出电压的电流全部流经R2和R1，因此V2由R1和R2对Vout分压得到。

![](https://pic1.zhimg.com/80/v2-635b249fe2f2b300de8dc5d573c095b0_1440w.webp)

因此，

![](https://pic1.zhimg.com/80/v2-09ce70aae334ba54fdd53566e6d77f30_1440w.webp)

调节R2可以电路的放大倍数。

注意，同相放大电路的应用场合具有局限性，一般只用于直流电平的放大，不适合用于交流信号的放大，因为它会将交流信号的直流偏置电压一并放大，从而使其偏置电位发生偏移。带参考电平的反相比例放大电路在信号放大时比较有实用性。

![](https://pic3.zhimg.com/80/v2-7ab9234ab315d5f90b8fba641f49864e_1440w.webp)

  

实际上只是在图2.3的差分放大器的基础上加一个隔直电容C1,具体原理待日后讲解有源滤波器时再分析。

## 前后级隔离
起隔离作用，防止前级波动影响后级输入，可以提高带载能力

## 电压跟随电路

  

![](https://pic2.zhimg.com/80/v2-f444a6b439522a20877911001278aa3d_1440w.webp)

  

图2.5 电压跟随电路

图2.5是运放的一种特殊应用方式，很容易得到结论Vout=Vin。输出电压跟随输入电压，因此称之为“电压跟随器”。

电压跟随电路是图2.4同相放大电路的衍生产物，是放大倍数为1的同相放大电路。前文已介绍理想的同相放大电路的输入阻抗无穷大，输出阻抗无穷小。

基于此特性，电压跟随电路一般用于信号的隔离。简单举例说明，如图2.6，由R1和R2产生参考电压供给下一级电路使用，因为下一级电路的等效内阻会影响R1和R2的分压比，因此参考电压将会发生变化，如果内阻不是固定的，则此电路将无法使用。

![](https://pic4.zhimg.com/80/v2-7e6206ea13c1da459f670d71c88b710f_1440w.webp)

图2.6 不可靠的参考电压电路

比较可靠的设计如图2.7所示：

![](https://pic4.zhimg.com/80/v2-f8a066ae6f1913399d4950271b267b57_1440w.webp)

图2.7 可靠的参考电压电路

仪器放大电路

![](https://pic1.zhimg.com/80/v2-a43a8a58daef5e762d9910b3245a9bf8_1440w.webp)

图2.8 仪器放大电路

图2.8是典型的仪器放大电路，顾名思义此方法电路使用于小信号的放大，一般用于传感器信号的放大。传感器的输出信号很小，一般只有几毫伏到几十毫伏。

电路由两级放大电路组成，第一级由A1,A2组成，同相输入，输入阻抗高，电路结构对称，可很好的抑制零点漂移；第二级由A3组成，良好的共模抑制比，输入阻抗高，增益在大范围内可调。

选值要求：R4=R5,R6=R7,R8=R9（保持电路的对称性），R3为可调电阻，用于调节电路增益。电路输入输出的关系式如下：

![](https://pic2.zhimg.com/80/v2-a88427f531311721f51dfb08d25b913d_1440w.webp)

推导过程：

实际上，仪器放大电路是前文所述的同相放大电路及差分放大电路的综合体。分析方法可以参考前文的阐述。

（1）、首先分析由A1和A2组成的同相放大电路。

由“虚短”及“虚断”原则，推导得到：

![](https://pic3.zhimg.com/80/v2-678191a39037e5aedd924ae4c9875ba6_1440w.webp)

（2）、进一步分析由A3组成的差分放大电路。

由“虚短”及“虚断”原则，推导得到：

![](https://pic2.zhimg.com/80/v2-fe22df522797c30b5e580de0c326cd61_1440w.webp)

（3）、联合等式2.9和2.10得到结论：

![](https://pic2.zhimg.com/80/v2-20bc29ec5ae53a7c011e2d77584ba06d_1440w.webp)

## 比较器
**1）、简单的比较器**

![](https://pic4.zhimg.com/80/v2-3b1524a5a6fbf59beb6d8b7f7ab9ab2b_1440w.webp)

图2.9 简单的比较器

图2.9是最简单的比较器电路，它利用的原理是“理想的运放具有无穷大的增益”。因此，V+与V-之间稍有电压差，即可引起输出的翻转。微弱的电压差经运放放大引起输出饱和。

![](https://pic2.zhimg.com/80/v2-57648a18ca482054c2cb1ec96581c669_1440w.webp)

Av为运放的开环放大倍数（一般为100dB左右，即十万倍）。当V+大于V-时，输出为正饱和（接近VCC，但是无法达到）；当V-大于V+时，输出为负饱和（接近-VSS，但是无法达到）。连接V+至地，构成过零比较器，如图2.10所示。

![](https://pic3.zhimg.com/80/v2-912ee678218f0167790e0e3e3618a14a_1440w.webp)

图2.10 过零比较器

图2.10的过零比较器虽然简单，但是并不实用，它的问题在于比较器只有一个临界电压，输入信号上的杂波易引起输出误操作，如图2.11所示。

![](https://pic1.zhimg.com/80/v2-d287bcae440e8a7014de75cf692c1728_1440w.webp)

图2.11，信号杂波引起的比较器误操作

**2）、迟滞比较器（The hysteresis comparator）**

相对于上文所述的简单比较器，比较实用的是迟滞比较器，如图2.12所示。

![](https://pic4.zhimg.com/80/v2-e78ea56facdac558fa0ddcf64fd64b23_1440w.webp)

图2.12，迟滞比较器

相比简单比较器，迟滞比较器只是增加了一个电阻R2。这将引起怎样的微妙变化呢？

通俗地说，R2在输入与输出之间搭起了一座桥梁，输出的变化可以通过R2传递至输入，然后比较器的阈值将随输出的变化而改变，达到了磁滞的目的。

如果需要定量分析，所有的比较器的原理都是一样的，利用运放的放大倍速为“无穷大”，将V+与V-之间的微弱电压差进行放大，达到饱和输出。所以，首先计算比较器的临界电压值（V+），得到等式2.11。  

![](https://pic3.zhimg.com/80/v2-8e6c39dbeb2dc53ee76c1e32bdbd3e5a_1440w.webp)

显然，R2的作用是将输出电压引入临界电压。因为Vout会有两种状态+Vsat和-Vsat,所以迟滞比较器也将有两个临界电压（Vth_H及Vth_L）。  

![](https://pic1.zhimg.com/80/v2-422c9f2e1efdf21a2e053e85a474036c_1440w.webp)


表格2.1，迟滞比较器的状态表

![](https://pic1.zhimg.com/80/v2-39b9f5f7be669afab44908f03471a068_1440w.webp)

表格2.1可以很好的解释迟滞比较器的工作原理，图2.8是另一种有效的表达迟滞比较器工作原理的方式。设计合适的Vth_H及Vth_L，使(Vth_H-Vth_L)大于杂波幅值，可以有效的避免因为输入信号上的杂波引起的误操作。

  

![](https://pic1.zhimg.com/80/v2-9bd1802ce75cf8dec9d7049ee29692a8_1440w.webp)

图2.13，迟滞比较器的状态矢量图  

**3）、窗口比较器**  

窗口比较器用于判别输入电压是否落在某一个范围之内，图2.14是典型的窗口比较器。

其中，URH>URL，D1和D2不能省略，防止两个运放输出电平相反时损坏运放。比如，运放A1输出VOH，但是运放A2输出VOL,D1导通，但是D2截止，因此电流不会从A1流入A2,避免大电流损坏器件。  

![](https://pic1.zhimg.com/80/v2-12909c84ac1737620872540468abc3a4_1440w.webp)

图2.14，窗口比较器  

窗口比较的工作原理如图2.15所示。  
1）、Uin>URH>URL，A1输出UOH,A2输出UOL，D1导通，D2截止，Uout=UOH;  
2）、Uin<URL<URH，A1输出UOL,A2输出UOH，D1截止，D2导通，Uout=UOH;  
3）、URL< Uin<URH，A1输出UOL,A2输出UOL，D1截止，D2截止，Uout=UOL;  

![](https://pic4.zhimg.com/80/v2-aeaa48cfd7e38a1419382c36885002f7_1440w.webp)

图2.15，窗口比较器的逻辑